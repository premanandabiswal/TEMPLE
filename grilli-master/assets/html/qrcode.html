<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEMPLE Money Donation</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- QRCode.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            /* Bright Luminous Skin Palette */
            --skin-primary: #F5E8D6; /* Bright Ivory */
            --skin-bright: #FFF5EB;  /* Luminous Highlight */
            --skin-muted: #DBC4A1;   /* Warm Sand */
            --skin-glow: rgba(245, 232, 214, 0.4);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #000000;
            color: #ffffff;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #1a1a1a;
            border-radius: 10px;
        }
        
        .modal-enter {
            animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .skin-gradient {
            background: linear-gradient(135deg, var(--skin-bright) 0%, var(--skin-primary) 50%, var(--skin-muted) 100%);
        }

        .active-nav {
            background: rgba(245, 232, 214, 0.12);
            color: var(--skin-bright);
            border: 1px solid rgba(245, 232, 214, 0.25);
        }

        #qrcode img {
            margin: 0 auto;
            border-radius: 16px;
            padding: 12px;
            background: white;
            box-shadow: 0 0 30px rgba(245, 232, 214, 0.2);
        }

        .stats-card-hover:hover {
            border-color: rgba(245, 232, 214, 0.4);
            box-shadow: 0 10px 30px -10px rgba(245, 232, 214, 0.1);
        }
    </style>
</head>
<body class="h-screen flex overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-72 border-r border-white/5 bg-black hidden lg:flex flex-col">
        <div class="p-8 mb-4">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 skin-gradient rounded-xl flex items-center justify-center text-black font-extrabold shadow-lg shadow-[#F5E8D6]/20 text-xl italic">ðŸ’°</div>
                <span class="text-xl font-black tracking-tight text-white uppercase italic">TEMPLE</span>
            </div>
        </div>
        <nav class="flex-1 px-6 space-y-2">
            <button class="nav-item active-nav w-full flex items-center gap-3 px-5 py-3.5 rounded-2xl transition-all duration-300">
                <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                <span class="font-bold text-sm tracking-wide">Vault Overview</span>
            </button>
            <button class="nav-item w-full flex items-center gap-3 px-5 py-3.5 rounded-2xl text-zinc-500 hover:text-[#F5E8D6] hover:bg-white/5 transition-all">
                <i data-lucide="receipt" class="w-5 h-5"></i>
                <span class="font-bold text-sm tracking-wide">History</span>
            </button>
            <button class="nav-item w-full flex items-center gap-3 px-5 py-3.5 rounded-2xl text-zinc-500 hover:text-[#F5E8D6] hover:bg-white/5 transition-all">
                <i data-lucide="credit-card" class="w-5 h-5"></i>
                <span class="font-bold text-sm tracking-wide">Payment Hub</span>
            </button>
            <button class="nav-item w-full flex items-center gap-3 px-5 py-3.5 rounded-2xl text-zinc-500 hover:text-[#F5E8D6] hover:bg-white/5 transition-all">
                <i data-lucide="qr-code" class="w-5 h-5"></i>
                <span class="font-bold text-sm tracking-wide">Quick Scan</span>
            </button>
            <button class="nav-item w-full flex items-center gap-3 px-5 py-3.5 rounded-2xl text-zinc-500 hover:text-[#F5E8D6] hover:bg-white/5 transition-all">
                <i data-lucide="settings-2" class="w-5 h-5"></i>
                <span class="font-bold text-sm tracking-wide">Settings</span>
            </button>
        </nav>
        <div class="p-6">
            <div class="flex items-center gap-3 p-4 rounded-3xl bg-white/[0.03] border border-white/5">
                <div class="w-11 h-11 rounded-2xl skin-gradient flex items-center justify-center text-black font-bold border border-white/20 shadow-inner">AR</div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-bold truncate text-white">Alex Rivera</p>
                    <p class="text-[10px] text-[#DBC4A1] uppercase font-black tracking-widest">Prestige Member</p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col overflow-hidden">
        <!-- Header -->
        <header class="h-20 border-b border-white/5 bg-black flex items-center justify-between px-10 shrink-0">
            <div class="flex items-center gap-4">
                <h1 id="page-title" class="text-sm font-black uppercase tracking-[0.4em] text-[#DBC4A1]">Global Asset Control</h1>
            </div>
            <div class="flex items-center gap-8">
                <div class="relative group hidden sm:block">
                    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-zinc-600 w-4 h-4"></i>
                    <input 
                        id="search-input"
                        type="text" 
                        placeholder="Search for assets..."
                        class="pl-12 pr-6 py-2.5 bg-white/[0.04] border border-white/10 rounded-full text-xs text-white placeholder:text-zinc-600 focus:ring-1 focus:ring-[#F5E8D6]/50 outline-none transition-all w-64 focus:w-80"
                    />
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="toggleQRModal()" class="flex items-center gap-2.5 px-6 py-2.5 bg-[#F5E8D6] text-black rounded-full transition-all hover:bg-white active:scale-95 shadow-xl shadow-[#F5E8D6]/10">
                        <i data-lucide="qr-code" class="w-4 h-4"></i>
                        <span class="text-[10px] font-black tracking-widest uppercase">Quick Pay</span>
                    </button>
                    <button class="p-2.5 text-zinc-500 hover:text-white relative transition-colors bg-white/5 rounded-full border border-white/5">
                        <i data-lucide="bell" class="w-5 h-5"></i>
                        <span class="absolute top-2.5 right-2.5 w-2 h-2 bg-[#F5E8D6] rounded-full border-2 border-black"></span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Scrollable Area -->
        <div class="flex-1 overflow-y-auto p-10 space-y-12 custom-scrollbar">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8" id="stats-container">
                <!-- Stats injected by JS -->
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                <!-- Payment Methods Section -->
                <div class="lg:col-span-1 space-y-8">
                    <div class="flex items-center justify-between">
                        <h2 class="text-[10px] font-black text-[#DBC4A1] uppercase tracking-[0.3em]">Vault Inventory</h2>
                        <button onclick="toggleAddCardModal()" class="p-2.5 bg-white/5 border border-white/10 text-[#F5E8D6] rounded-xl hover:bg-white/10 hover:border-[#F5E8D6]/40 transition-all">
                            <i data-lucide="plus" class="w-5 h-5"></i>
                        </button>
                    </div>
                    
                    <div id="cards-container" class="space-y-6">
                        <!-- Cards injected by JS -->
                    </div>
                </div>

                <!-- Transaction List Section -->
                <div class="lg:col-span-2 space-y-8">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-6">
                        <h2 class="text-[10px] font-black text-[#DBC4A1] uppercase tracking-[0.3em]">Flow Activity</h2>
                        <div class="flex items-center gap-3">
                            <div class="flex border border-white/5 rounded-full p-1 bg-white/[0.02]" id="filter-tabs">
                                <button data-filter="All" class="filter-btn active px-6 py-2 rounded-full text-[9px] font-black uppercase tracking-widest bg-[#F5E8D6] text-black">All Flow</button>
                                <button data-filter="Completed" class="filter-btn px-6 py-2 rounded-full text-[9px] font-black uppercase tracking-widest text-zinc-500 hover:text-white transition-all">Cleared</button>
                                <button data-filter="Pending" class="filter-btn px-6 py-2 rounded-full text-[9px] font-black uppercase tracking-widest text-zinc-500 hover:text-white transition-all">On Hold</button>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white/[0.02] border border-white/5 rounded-[40px] overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full text-left border-collapse">
                                <thead>
                                    <tr class="border-b border-white/5 bg-white/[0.01]">
                                        <th class="px-8 py-6 text-[9px] font-black text-[#DBC4A1] uppercase tracking-[0.25em]">Transaction Label</th>
                                        <th class="px-8 py-6 text-[9px] font-black text-[#DBC4A1] uppercase tracking-[0.25em] text-center">Class</th>
                                        <th class="px-8 py-6 text-[9px] font-black text-[#DBC4A1] uppercase tracking-[0.25em] text-center">Timeline</th>
                                        <th class="px-8 py-6 text-[9px] font-black text-[#DBC4A1] uppercase tracking-[0.25em] text-center">Status</th>
                                        <th class="px-8 py-6 text-[9px] font-black text-[#DBC4A1] uppercase tracking-[0.25em] text-right">Value</th>
                                    </tr>
                                </thead>
                                <tbody id="transactions-body" class="divide-y divide-white/5">
                                    <!-- Rows injected by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal: Add Card -->
    <div id="add-card-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-2xl p-4 hidden">
        <div class="bg-black border border-white/10 rounded-[48px] w-full max-w-md shadow-2xl overflow-hidden modal-enter">
            <div class="p-10 border-b border-white/5 flex items-center justify-between">
                <h3 class="text-sm font-black text-white uppercase tracking-[0.4em]">Register New Hub</h3>
                <button onclick="toggleAddCardModal()" class="p-2 hover:bg-white/5 rounded-full text-zinc-600 hover:text-white transition-colors">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <form id="add-card-form" class="p-10 space-y-8">
                <div class="space-y-6">
                    <div class="space-y-2">
                        <label class="text-[9px] font-black text-[#DBC4A1] uppercase tracking-widest ml-1">Entity Name</label>
                        <input type="text" id="new-card-holder" required placeholder="ALEX RIVERA" class="w-full px-6 py-4 bg-white/[0.05] border border-white/10 rounded-2xl text-white placeholder:text-zinc-700 focus:border-[#F5E8D6]/60 outline-none transition-all uppercase text-sm font-bold tracking-[0.1em]" />
                    </div>
                    <div class="space-y-2">
                        <label class="text-[9px] font-black text-[#DBC4A1] uppercase tracking-widest ml-1">Digital Identifier</label>
                        <input type="text" id="new-card-number" required placeholder="â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢" class="w-full px-6 py-4 bg-white/[0.05] border border-white/10 rounded-2xl text-white placeholder:text-zinc-700 focus:border-[#F5E8D6]/60 outline-none transition-all font-mono text-base" />
                    </div>
                    <div class="grid grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-[9px] font-black text-[#DBC4A1] uppercase tracking-widest ml-1">Exp Cycle</label>
                            <input type="text" id="new-card-expiry" required placeholder="MM/YY" class="w-full px-6 py-4 bg-white/[0.05] border border-white/10 rounded-2xl text-white placeholder:text-zinc-700 focus:border-[#F5E8D6]/60 outline-none transition-all font-bold" />
                        </div>
                        <div class="space-y-2">
                            <label class="text-[9px] font-black text-[#DBC4A1] uppercase tracking-widest ml-1">Secure Pin</label>
                            <input type="text" id="new-card-cvc" required placeholder="â€¢â€¢â€¢" class="w-full px-6 py-4 bg-white/[0.05] border border-white/10 rounded-2xl text-white placeholder:text-zinc-700 focus:border-[#F5E8D6]/60 outline-none transition-all" />
                        </div>
                    </div>
                </div>
                <button type="submit" class="w-full py-5 skin-gradient text-black rounded-3xl font-black uppercase tracking-[0.25em] shadow-2xl shadow-[#F5E8D6]/10 hover:brightness-110 transition-all active:scale-[0.98]">
                    Authorize Asset
                </button>
            </form>
        </div>
    </div>

    <!-- Modal: QR Code -->
    <div id="qr-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/98 backdrop-blur-3xl p-4 hidden">
        <div class="bg-black border border-white/10 rounded-[56px] w-full max-w-sm shadow-2xl overflow-hidden text-center modal-enter">
            <div class="p-8 border-b border-white/5 flex items-center justify-between">
                <h3 class="text-[10px] font-black text-[#DBC4A1] uppercase tracking-[0.4em]">Secure Linkage</h3>
                <button onclick="toggleQRModal()" class="p-2 hover:bg-white/5 rounded-full text-zinc-600 hover:text-white">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <div class="p-12 space-y-10">
                <div id="qrcode" class="mx-auto flex justify-center scale-110 drop-shadow-[0_0_35px_rgba(245,232,214,0.35)] transition-all hover:scale-125 duration-500 cursor-pointer"></div>
                <div class="space-y-2">
                    <p class="text-white font-extrabold text-2xl tracking-tighter uppercase italic">ALEX RIVERA</p>
                    <p class="text-[#F5E8D6] text-[11px] font-black uppercase tracking-[0.3em]">ID: PRESTIGE-FLOW-8812</p>
                </div>
                <div class="bg-white/[0.04] p-6 rounded-[32px] border border-white/5 group hover:border-[#F5E8D6]/40 transition-all cursor-pointer">
                    <p class="text-[10px] text-zinc-600 uppercase tracking-widest mb-2 font-black">Private Vault Key</p>
                    <p class="text-[11px] text-[#F5E8D6] font-mono break-all leading-relaxed">0x71C7656EC7ab88b098defB751B7401B5f6d8976F</p>
                </div>
                <button class="w-full py-4 border-2 border-[#F5E8D6]/20 text-[#F5E8D6] rounded-full text-[11px] font-black tracking-[0.2em] hover:bg-[#F5E8D6] hover:text-black transition-all">
                    COPY VAULT KEY
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- State Management ---
        let transactions = [
            { id: 'AUTH-1102', merchant: 'Artificial Intelligence Hub', date: 'FEB 10, 2024', amount: -6142.50, status: 'Completed', category: 'Computing' },
            { id: 'AUTH-1103', merchant: 'Bespoke Automotive', date: 'FEB 09, 2024', amount: -185000.00, status: 'Pending', category: 'Lifestyle' },
            { id: 'AUTH-1104', merchant: 'Offshore Dividends', date: 'FEB 08, 2024', amount: 95000.00, status: 'Completed', category: 'Investment' },
            { id: 'AUTH-1105', merchant: 'Architectural Firm', date: 'FEB 07, 2024', amount: -12500.00, status: 'Completed', category: 'Real Estate' },
            { id: 'AUTH-1106', merchant: 'Private Jet Service', date: 'FEB 06, 2024', amount: -34000.20, status: 'Failed', category: 'Logistics' },
        ];

        let cards = [
            { id: 1, type: 'Prestige', last4: '8812', expiry: '12/30', holder: 'ALEX RIVERA', color: 'skin-gradient text-black shadow-[0_25px_60px_rgba(245,232,214,0.18)]' },
            { id: 2, type: 'Vault', last4: '4242', expiry: '08/28', holder: 'ALEX RIVERA', color: 'bg-zinc-900 text-zinc-100 border-zinc-800' }
        ];

        const statsData = [
            { label: 'Total Net Liquidity', value: '$2,142,560.00', change: '+18.2%', icon: 'sparkles', color: 'text-[#F5E8D6]', bgColor: 'bg-white/[0.05]' },
            { label: 'Passive Inflow', value: '$42,240.50', change: '+11.5%', icon: 'trending-up', color: 'text-[#F5E8D6]', bgColor: 'bg-white/[0.05]' },
            { label: 'Collateral Holds', value: '$12,200.00', change: '-1.4%', icon: 'lock', color: 'text-zinc-600', bgColor: 'bg-white/[0.05]' }
        ];

        let currentFilter = 'All';
        let currentSearch = '';

        // --- UI Rendering ---

        function renderStats() {
            const container = document.getElementById('stats-container');
            container.innerHTML = statsData.map(stat => `
                <div class="bg-black p-8 rounded-[40px] border border-white/5 stats-card-hover transition-all group relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-[#F5E8D6]/10 rounded-full -mr-16 -mt-16 blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    <div class="flex items-start justify-between mb-8 relative z-10">
                        <div class="p-3.5 rounded-2xl ${stat.bgColor} ${stat.color} border border-white/5">
                            <i data-lucide="${stat.icon}" class="w-6 h-6"></i>
                        </div>
                        <span class="text-[11px] font-black tracking-widest px-4 py-1.5 rounded-full ${stat.change.startsWith('+') ? 'bg-emerald-400/10 text-emerald-300' : 'bg-rose-400/10 text-rose-300'}">
                            ${stat.change}
                        </span>
                    </div>
                    <p class="text-[11px] font-black text-zinc-600 uppercase tracking-[0.3em] relative z-10">${stat.label}</p>
                    <h3 class="text-3xl font-extrabold mt-3 text-white tracking-tighter relative z-10">${stat.value}</h3>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderCards() {
            const container = document.getElementById('cards-container');
            container.innerHTML = cards.map(card => `
                <div class="${card.color} rounded-[40px] p-10 shadow-2xl relative overflow-hidden group h-56 flex flex-col justify-between transition-all hover:scale-[1.03] active:scale-[0.98]">
                    <div class="flex justify-between items-start z-10">
                        <div class="space-y-1">
                            <p class="text-[11px] opacity-70 font-black uppercase tracking-[0.2em]">Active Capital</p>
                            <p class="text-3xl font-black tracking-tighter leading-none">$14,250.00</p>
                        </div>
                        <i data-lucide="crown" class="w-7 h-7 opacity-80"></i>
                    </div>
                    <div class="space-y-8 z-10">
                        <p class="text-2xl tracking-[0.35em] font-mono font-bold opacity-90 leading-none">â€¢â€¢â€¢â€¢ ${card.last4}</p>
                        <div class="flex justify-between items-end">
                            <div class="space-y-1.5">
                                <p class="text-[10px] uppercase opacity-50 font-black tracking-widest">Signatory</p>
                                <p class="text-xs font-black tracking-widest italic">${card.holder}</p>
                            </div>
                            <div class="text-right space-y-1.5">
                                <p class="text-[10px] uppercase opacity-50 font-black tracking-widest">Authorized To</p>
                                <p class="text-xs font-black tracking-widest">${card.expiry}</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="deleteCard(${card.id})" class="absolute top-8 right-8 opacity-0 group-hover:opacity-100 transition-all p-3 bg-black/10 rounded-2xl hover:bg-rose-600 hover:text-white hover:scale-110">
                        <i data-lucide="trash-2" class="w-5 h-5"></i>
                    </button>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderTransactions() {
            const tbody = document.getElementById('transactions-body');
            const filtered = transactions.filter(t => {
                const matchesFilter = currentFilter === 'All' || t.status === currentFilter;
                const matchesSearch = t.merchant.toLowerCase().includes(currentSearch.toLowerCase()) || t.id.toLowerCase().includes(currentSearch.toLowerCase());
                return matchesFilter && matchesSearch;
            });

            tbody.innerHTML = filtered.map(txn => {
                const isIncome = txn.amount > 0;
                let statusClass = 'text-zinc-600 border-white/5';
                if(txn.status === 'Completed') statusClass = 'text-[#F5E8D6] border-[#F5E8D6]/30 bg-[#F5E8D6]/10';
                if(txn.status === 'Pending') statusClass = 'text-amber-300/80 border-amber-300/20 bg-amber-300/5';
                if(txn.status === 'Failed') statusClass = 'text-rose-300/80 border-rose-300/20 bg-rose-300/5';

                return `
                    <tr class="hover:bg-white/[0.03] transition-all group">
                        <td class="px-8 py-7">
                            <div class="flex items-center gap-6">
                                <div class="w-12 h-12 rounded-[20px] flex items-center justify-center transition-all group-hover:scale-110 border border-white/5 ${isIncome ? 'bg-emerald-400/10 text-emerald-300' : 'bg-white/[0.05] text-[#DBC4A1]'}">
                                    <i data-lucide="${isIncome ? 'arrow-down-left' : 'arrow-up-right'}" class="w-5 h-5"></i>
                                </div>
                                <div>
                                    <p class="font-black text-sm text-white tracking-tight uppercase">${txn.merchant}</p>
                                    <p class="text-[10px] font-black text-zinc-600 tracking-widest mt-1">${txn.id}</p>
                                </div>
                            </div>
                        </td>
                        <td class="px-8 py-7 text-center">
                            <span class="text-[10px] px-4 py-1.5 rounded-full border border-white/5 bg-white/[0.03] text-zinc-500 font-black uppercase tracking-[0.2em]">${txn.category}</span>
                        </td>
                        <td class="px-8 py-7 text-[11px] text-zinc-500 font-bold text-center tracking-[0.05em] uppercase">
                            ${txn.date}
                        </td>
                        <td class="px-8 py-7 text-center">
                            <span class="inline-flex items-center px-5 py-1.5 rounded-full text-[10px] font-black uppercase border tracking-[0.2em] ${statusClass}">
                                ${txn.status}
                            </span>
                        </td>
                        <td class="px-8 py-7 text-right font-black text-base tracking-tighter ${isIncome ? 'text-emerald-300' : 'text-white'}">
                            ${isIncome ? '+' : ''}${txn.amount.toLocaleString('en-US', { style: 'currency', currency: 'USD' })}
                        </td>
                    </tr>
                `;
            }).join('');
            lucide.createIcons();
        }

        // --- Logic Hooks ---

        document.getElementById('search-input').addEventListener('input', (e) => {
            currentSearch = e.target.value;
            renderTransactions();
        });

        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => {
                    b.className = "filter-btn px-6 py-2 rounded-full text-[9px] font-black uppercase tracking-widest text-zinc-600 hover:text-white transition-all";
                });
                btn.className = "filter-btn active px-6 py-2 rounded-full text-[9px] font-black uppercase tracking-widest bg-[#F5E8D6] text-black shadow-2xl shadow-[#F5E8D6]/20";
                currentFilter = btn.dataset.filter;
                renderTransactions();
            });
        });

        document.getElementById('add-card-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const holder = document.getElementById('new-card-holder').value;
            const number = document.getElementById('new-card-number').value;
            const expiry = document.getElementById('new-card-expiry').value;
            
            cards.push({
                id: Date.now(),
                type: 'Asset Hub',
                last4: number.slice(-4) || '0000',
                expiry: expiry,
                holder: holder.toUpperCase(),
                color: 'bg-zinc-900 text-zinc-100 border border-zinc-800'
            });

            renderCards();
            toggleAddCardModal();
            e.target.reset();
        });

        function deleteCard(id) {
            cards = cards.filter(c => c.id !== id);
            renderCards();
        }

        function toggleAddCardModal() {
            const modal = document.getElementById('add-card-modal');
            modal.classList.toggle('hidden');
        }

        let qrGenerated = false;
        function toggleQRModal() {
            const modal = document.getElementById('qr-modal');
            modal.classList.toggle('hidden');
            
            if (!modal.classList.contains('hidden') && !qrGenerated) {
                new QRCode(document.getElementById("qrcode"), {
                    text: "payflow:auth:rivera-prestige-0x71C7656EC7ab88b098defB751B7401B5f6d8976F",
                    width: 220,
                    height: 220,
                    colorDark : "#000000",
                    colorLight : "#ffffff",
                    correctLevel : QRCode.CorrectLevel.H
                });
                qrGenerated = true;
            }
        }

        // --- Init ---
        window.onload = () => {
            renderStats();
            renderCards();
            renderTransactions();
            lucide.createIcons();
        };

    </script>
</body>
</html>